---
title: "Write-up | CC: Pen Testing"
date: 2020-07-07T21:04:25+02:00
draft: false
tags:
  - writeup
  - tryhackme
---

Ce write-up couvrira l'examen final de la room CC: Pen Testing, sur [Try Hack Me](https://tryhackme.com).

## Reconnaissance

Comme à l'habitude, un petit `nmap` pour commencer :
```
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 12:96:a6:1e:81:73:ae:17:4c:e1:7c:63:78:3c:71:1c (RSA)
|   256 6d:9c:f2:07:11:d2:aa:19:99:90:bb:ec:6b:a1:53:77 (ECDSA)
|_  256 0e:a5:fa:ce:f2:ad:e6:fa:99:f3:92:5f:87:bb:ba:f4 (ED25519)
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Apache2 Ubuntu Default Page: It works
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

Rien de bien nouveau ici : SSH sur le port 22 et serveur Apache sur le port 80. J'utilise ensuite `gobuster` pour enumérer le serveur web :
```
===============================================================
2020/07/07 18:09:15 Starting gobuster
===============================================================
/.htpasswd (Status: 403)
/.htaccess (Status: 403)
/[edited] (Status: 301)
/server-status (Status: 403)
Progress: 19113 / 20470 (93.37%)^C
===============================================================
2020/07/07 18:12:40 Finished
===============================================================
```
Il y a donc un dossier caché. Je relance `gobuster` dessus pour essayer de trouver un fichier, bingo !

## Pénétration
La page contient des identifiants :
```
nyan:[edited]
```

J'utilise `hash-identifier` afin de savoir quel est le type de hash utilisé :
```
Possible Hashs:
[+] SHA-1
[+] MySQL5 - SHA-1(SHA-1($pass))
```

puis [CrackStation](https://crackstation.net) pour essayer de le casser. Il me retourne le mot de passe correspondant au hash. Je vais pourvoir essayer ces identifiants sur le port 22.
Ça fonctionne !

## Élévation de privilèges

Une fois connecté, je `ls` le dossier courant afin de connaitre le nom du flag et de le lire :
```
$ cat user.txt 
[edited]
```

Afin de voir si je peux exécuter des commandes en tant que root, je tape `sudo -l` :
```
User nyan may run the following commands on ubuntu:
    (root) NOPASSWD: /bin/su
```
Ça part bien :)

Juste un petit `sudo su` et me voilà root !
```
# cat /root/root.txt 
[edited]
```

Et voilà ! Une petite room sympa pour commencer les CTF !
